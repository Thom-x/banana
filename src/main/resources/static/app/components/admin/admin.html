<div class="container">
	<h2>Admin</h2>
	<h3>Add Sprint</h3>
	<form novalidate ng-submit="adminCtrl.save()" class="simple-form">
		<div class="form-group">
			<label for="sprintNumber">Sprint Number</label> <input type="text"
				class="form-control" id="sprintNumber"
				ng-model="adminCtrl.newSprint.id" required>
		</div>
		<div class="form-group">
			<label for="sprintStart">Sprint start</label>
			<p class="input-group">
				<input type="text" id="sprintStart" class="form-control"
					uib-datepicker-popup="dd/MM/yyyy"
					ng-model="adminCtrl.newSprint.start" is-open="openedStart"
					datepicker-options="adminCtrl.dateOptions" ng-required="true"
					close-text="Close" /> <span class="input-group-btn" required>
					<button type="button" class="btn btn-default"
						ng-click="openedStart = !openedStart">open</button>
				</span>
			</p>
		</div>
		<div class="form-group">
			<label for="sprintEnd">Sprint end</label>
			<p class="input-group">
				<input type="text" id="sprintEnd" class="form-control"
					uib-datepicker-popup="dd/MM/yyyy"
					ng-model="adminCtrl.newSprint.end" is-open="openedEnd"
					datepicker-options="adminCtrl.dateOptions" ng-required="true"
					close-text="Close" /> <span class="input-group-btn" required>
					<button type="button" class="btn btn-default"
						ng-click="openedEnd = !openedEnd">open</button>
				</span>
			</p>
		</div>

		<button type="button" class="btn btn-default"
			ng-click="adminCtrl.addStory()">Add Story</button>
		<ul class="list-group">
			<li class="list-group-item"
				ng-repeat="story in adminCtrl.newSprint.stories">
				<h4>{{$index+1}}</h4>
				<div class="form-group">
					<label>Story Number</label> <input type="text" class="form-control"
						ng-model="story.id" required>
				</div>
				<div class="form-group">
					<label>Story Complexity</label> <input type="number"
						class="form-control" ng-model="story.complexity"
						placeholder="number" required>
				</div>
			</li>
		</ul>
		<input type="submit" class="btn btn-primary" value="Save" />
	</form>
	<h3>Edit Story</h3>
	<form novalidate class="simple-form">
		<div class="form-group">
			<label for="selectedSprint">Sprint</label> <select
				id="selectedSprint" class="form-control input-lg"
				ng-change="adminCtrl.onSprintChange()"
				ng-model="adminCtrl.selectedSprint"
				ng-options="sprint.id for sprint in adminCtrl.sprints">
			</select>
		</div>
		<table class="table table-hover" ng-if="adminCtrl.selectedSprint">
			<thead>
				<tr>
					<th>Id</th>
					<th>Complexity</th>
					<th>Start date</th>
					<th>Close date</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody ng-if="adminCtrl.stories">
				<tr ng-repeat="story in adminCtrl.stories">

					<td>{{story.id}}</td>
					<td ng-If="story.id != adminCtrl.editStoryId">{{story.complexity}}</td>
					<td ng-If="story.id != adminCtrl.editStoryId">{{story.addDate}}</td>
					<td ng-If="story.id != adminCtrl.editStoryId">{{story.closeDate}}</td>
					<td ng-If="story.id != adminCtrl.editStoryId">
						<button class="btn btn-info "
							ng-click="adminCtrl.editStoryId = story.id">
							<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
						</button>
							<button class="btn btn-danger "
							ng-click="adminCtrl.removeStory(story)">
							<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
						</button>
					</td>


					<td ng-If="story.id == adminCtrl.editStoryId">
					<input
						type="text" ng-model="story.complexity" /></td>
					<td ng-If="story.id == adminCtrl.editStoryId">
					<input
						type="text" id="sprintEnd" class="form-control"
						uib-datepicker-popup="dd/MM/yyyy"
						ng-model="story.addDate" is-open="openedAdd"
						datepicker-options="adminCtrl.dateOptions" ng-required="true"
						close-text="Close" /> <span class="input-group-btn" ><button type="button" class="btn btn-default"
						ng-click="openedAdd = openedAdd">open</button>
				</span></td>
					<td ng-If="story.id == adminCtrl.editStoryId">	<input
						type="text" id="sprintEnd" class="form-control"
						uib-datepicker-popup="dd/MM/yyyy"
						ng-model="story.closeDate" is-open="openedClose"
						datepicker-options="adminCtrl.dateOptions" ng-required="true"
						close-text="Close" /> <span class="input-group-btn" ><button type="button" class="btn btn-default"
						ng-click="openedClose = openedClose">open</button>
				</span></td>
					<td ng-If="story.id == adminCtrl.editStoryId">
						<button class="btn btn-primary "
							ng-click="adminCtrl.saveStory(story)">
							<span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
						</button>
						<button class="btn btn-default "
							ng-click="adminCtrl.editStoryId = null">
							<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
						</button>
						
					</td>

				</tr>

			</tbody>
		</table>

	</form>
</div>